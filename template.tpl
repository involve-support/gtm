___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos
(or such other URL as Google may provide), as modified from time to time.

___INFO___

{
  "displayName": "Involve Conversion Tag",
  "description": "Conversion tag for Involve. Add the Involve Conversion Tag to the Thank You / Order Confirmation page of your website.",
  "categories": ["ADVERTISING", "AFFILIATE_MARKETING", "CONVERSIONS"],
  "securityGroups": [],
  "id": "cvt_temp_public_id",
  "type": "TAG",
  "version": 1,
  "brand": {
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAFdFJREFUeNrs3YFx3MixBuD2i4AZGJcBLwNcBnQGUASPF4GgCHQvAtIRSBmQjkDKgHwRSBnICxNblGSKXO5iFzPT31eFKtdV2T4CC+DvmcF0BAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADL+5tTAIs43xz95jj76Z9/no97p4gVdfNv9Pynf/51/n3eOkUAr3vpX22OL5vj2wvH3eYY5wcxnMIURi83x6cdfp/T8WEOsQA8U03d7PhQfeoYnxgpgCWNOwbTp44bQQDgvyuq8YAX//fH9HAenFIWNr247xb6jV6FESuA/7ys962onjs+qbZYQBeHjUo9F1THMGIFJK2odp1DPeT4oNpiD9OL+f0Jfp93YcQKSFRRfTjBg1W1xb4u4zijUi+tDzh36oFWK6pxhQeraotd9XGaUamX1gcIqkAzhlhuAdVS1VbvsjDr4vSjUruMWAFUXVEdYwGVaoslLPn1ybFGrC5cJqC2B+tVwQ9W1RZDrDsd9doRq84lA0o3VvRgVW3l00fZo1LPHe/DiBVQoIsoa57famy+11U0KvXSiNWlywmU4Lziikq1ZVSq1uMuLGQFVnKqjVJUW2QflbLRFVCMNTZKUW2RfVRKIyxgNX2Cispq7LpHpa4S/z41wgIW1yWsqFRbRqVqPTTCAhapqEYPVNWWUakqD22Hgb0MKirVllGpJoKqEStg54pq7YYoVmPz3KjUe783jbCAZSuqkhqiqLYwKmWjK+DIFdXowaraMiqVbn2AoArJKyoLqLQdNiqVe8QKSFZRWUCl2ip9VMpvx0ZXwIIP1swbpai2jEo5bHQF6Yxhnl/bYaNSDo2wII0MDVGsxq5XZ1RKIyxgWRkboqi2jEo5bHQFadkoRbVlVMphoytIRkMUq7GNSjk0woJEehWV1diFj0qZ59cIC1hQp6JSbRmVcqwYVHuPYTh9RTUmrDrGhJVkrdVWxlGpm8jZr0DbYTgRD5ic34zXsho746jUz2s3Mgd06wPgSBVVtoYoLw0xDgmrzFJXY2f8+uSl3R27yNfLwEZXsHBFlfEhsuuwd8ZuhqVVW1lHpXY9/1mnQ2x0BQdUVGPCB+u+LzZByahU6S+2jAsiNcKCPSoqQ9teSqWuxja0bapEIyw4QkVlcZth6VKrLYvblg1R2RdLApFzo5RTfN6W+YVlVKqOz9sybous7TDMxoSV6qkb4GSttpYYss44KrXGBjeeA5CI5L/OFIvV2LuHJqNSRgI1woIFZWyIUtrcX8bV2K+ptjJWo2NB1WjGZ4S2wzQt6+rfy4Kvh2rLqFTJbW4H1wPq5/tfIzIlj8ioOMsuHIzIQIX6MOdci6xrMoyC1KFLeK3W3ugK9r5ZrTqvU8ZqyzqIuooKX2VAwcN1NkqpP8Blq7Z8fVKXIXQFBTekG1K15Ui585yNrqCAl4S959sPd9nWB3hJ1DVipTcDuOma3ihFteXQfU4xYlthVn8R+CxH8HP4+qRE2T47/mI0AEPBNuZQbeWc5/fwf7pQybbx2OCyc6yHvY1S+FUo9Nmgr09KHrHK9OzyzGLRFG2jFFRbvj5poYi5S/L8Ego52BgaxqDa8vWJ51qN05awF216UW35+sTIpqkAEtEUhqVlbALl6xPPvFKmiWCnNJyxTe/o0qu2Ch/GNSpl1POQQ3BEhRY2SlFt+fqEl4Pq2Njz0OehPKkPbXpRbfn6hJ91DY1YGeXkv37c2vRSgtaqLV+ftFck1f6s9DUAPwxv2SgF1ZavT9jdUHFQvXH5qPkHbKMU1ZYvUFBACQDs8VDVppfawqpeE5Q8YvUhBAD8SG2Ugmorll2wZbpKcSUAcNCDU5teBNl6pwUE2bpGrEp+3goAiX6Ihk5RbZnK4vSF1/sQAFjp4ahNL6oti1lZf8SqtGexANBw6tSmF9WWbasprygrZTRWAGjQGNr0otqyoRUlK2GbdQGgIdr0QrnVli2teWrE6ioEAA6gTS88L+Mugppa1WOt57cAUHl6NN8JAoB1MQKAAJCINr0gABgxEwAEgET6MKcJAoA1MwKAAJBGF1Y1gwDgqxkBQABIQ5teEAD0xxAABIBkhrCzGQgAds4UAASANPqwtzkIAHpnCAACQBpdaNMLAoDumQKAAJCGNr0gAGg7LAAIAMkMoU0vCACm5gQAASCNPrTpBQHA4lwEgDS06QUBwDbcCADJjKFNLwgANuhCAEhDm14QAGzRjQCQiDa9IABo0oUAkIg2vSAAWOeDAJCMNr0gAHw/ImYEEAGgcX1o0wsCwI/H9FywBggBoFFdaNMLAsCvA8DWGL4CQgBogja9IAC8JgBsC4aM+4AMfoICQCuG0KYXBIDXB4CtPuwEigBQlT606QUB4PAAkLmY0AtEAKhKF9r0ggCwfACYZJxO1A1UACieNr0gABw7AGQuNLQdFgCKNIQ2vSAAnC4AbE3/HVONAoAAsALb94IAsGYA2LKpmAAgAJzQGPnm+W3fiQBQZgCIyLuteLZ9RgSAFZ0lrPpt0IEAUH4A2OqSPqMEAAHg6DLNt9miEwGgvgCwNf3vZVqblCUEpAsA/1PIiZ/mnDLsZ3+/Of6xOf6Y/zNQn9vN8dvmeLc5vib4e6cpysFl5xguIsd82uhSYwSgiRGA751Fjm2Fp2dYZwTAFMDSWh9K06YX2g0AWxm+XPogAJgCWNLQcKqchgl/3xxvkgwTQmaf42Fqb5riu2/0b7wIa5easnYA+N8Gz+n9/NL/Y34oAHl8nIN/q+sD3rrELGFKktr0Qh4tTwH86hl31eBzrlWmAE6opU0mrufUP4bhfuDBfTyOBt428jdNBc65S9uGNQPA3xs4f9t5vzfhsz7gabffPSdaKBA6l1QAOFTNKfLrfDP/3lCyB47rOh73D6iZEQABIK1380187VQAexQP4/wM+eh0IADU4eN8045hnh84zH087grqayEEgIJv1Na/7wXWcRsPU4l/KiwQAMrxdb4pfwvz/MBx/TU/a/5yKhAA3IyAogMEgBO5nW8+w3HAWu7jYdpR11AEgBPdcNr0AiUWJFnaDiMAnNTXePyszyc5QInG8OkxAsCiruPxsz6A0osVm48hABzoPrTpBer0fdthEAD2CAA23gBqZsoSAQAAEAAAAAEAABAAAAABAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAODUzp0CXnA2HwIAQEPeb44bQYBfGDbHXcbfhwAAZNBvjk9zGDhzOvjuN3GV9TchAACZXM7V3qVTkVa3OT6EUSEBAEjnbB4JuJurQPJc93Gu+i+cDgEAyF0J3sxH53Q0bZhf/G/DFJAAADDr59GA0cuhOedzwLsS8gQAgF95OweBwamo3tn80v8UpnkEAAAvjhRGQU4AANjXduh4Wi3eOR1VuJhf/Ob5BQCARV4qn8L6gJJ1wpoAAHAMZ3NVOQWBweko6rq08DnnvQAAtO5zA5XmVdhApgQtbej0/wIA0LrbRv6OPpJvIbvyub+LtrZ0/igAAK37V2N/zxCP+wdwXF08bt/bNfR33ceKI2MCAHDKSue+sb9puz5gCgK2lz3O+R0bPr//XPP/XAAATumdCpUdDfH4WV+Lvm6OvwQAIIvrqH8x4HP6aG+Oeo1zmGGNxf/NIUAAANJ4s/aD7wS0HX69LvJ8ZXEbBawdEQCAU5tGAP5M8HdqO7z7eRojzz4L95vjHyX8iwgAwBqu55GALJWtneqeNkSuNr2f55d/ESNgAgCwZgj4I9qfDtja7lU/hvUBGdv03s6/92LWwAgAwNoPxd/mMJBF5rbDGbstTgH3z2Rh90VT+vu2wnHj1EOR+hWfC2sdh7wI1/p3Hvf8953+e1+SXV9fgwgAwCsMc4Wc6UWxz1B4LQHgIuH1tB+EAADsabsyPNNL40u8bn1A6QGgSzii44sPAQBYyPQS+ZDwJbLLtrelBoDt548ZwxsCALCwqar6FPmGkc8rCwCXkW+eX1dIAQA4gcELpsgA0EfOef6qdyz0GSBQk+t4+Gzwr0R/8xDlth3uIl8TpPt42MynqG/6jQAYAYBMusi9yGzNEQCLNBEAgNX1kXP4ec3/74zTMJ1bTQAAyjQmfDE5jv++6Fu9YawBAFoKANm2FeY4pi17p2ZV0zz/rQAAUM+D+/eWH9wc1bssQVIAAFr0ea7eptXa904HO/g4v/jHSNK0RwAAWn+o/z5XdTqxISwKAEAiX+eqbgoC104H3/0u/ozE00UCAJDFVN01v7CLnUwbSWXbUEoAANK7nUPAmzAtkPHa/zZX/umvvQAAZHU9vwzeORXNu4/H7XvvnQ4BAGC7PmAKAh+djiav7zvXVwAA2KVC1OClDdfx+FkfAgDAs27jYVW4OeL6r6E1HgIAwKtZJV6f+3j8ysMojgAAsLftd+K/hc8GS79O78I+DwIAwBEqyz/CCvISXc8v/jEM9wsAAEdyG4+fDXrZrGu7fe8boaxOU5/ltfo7AxzibHNcRTt972s5vmyOwc/PCADAWrQdPr00bXqNABgBAOpxsTnuVOhHOT5sjs5PzAgAQIm0HV7efSRt02sEwAgAUKepWrU+4LB5/ks/IwFAAABq1a/4nKv1eB8PCywRAAQAoHrDXNV6wT//XO78VE7LGgCA47oObYd/5T606TUCYAQASGCqcj+o+P8zIjL6OQgAAgCQTb85PiV9+U8LJM3zCwACAJDaZeRZHzA9e89dcgQAgAdTNfy+4Rf/tEHS4DIjAAA8rYu2PhvczvMb7kcAANhBH/VvK2z7XgQAgD2NUd/6gE9zgAEBAOAAtbQd1qYXAQDgCM6j3PUBY5jnRwAAOKqS2g7bvhcBAOCEzuaqe83P+nqXoX56AQDU5Wusu43uPzfHrcsgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAACAAOAUAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAsDuus1x7tIDFbtwChAA9gsAnzbH1eY48xMAKjIVLzeb44NTgQCwv2Fz3G2O0c8AKNzZXLRMxUvvdCAALHNTvZ2DgJsKKNHl/IwanAoEgOV18TCsdjP/Z4C19fOL/32YrkQAcMMBChIQAI5nO+R26VQAJ3I2Fx+mJBEACrkZLboBjm1QdCAAlOf7z246pwNYUB8+S0YAKN5FPH426EYFDtHNRcVN2JgMAaAab+fEPjgVwCudzUXEXdjNj8Sm+fVvlR9Teu9dSmAHw/zir/25p/jhYJcN3AjbY5q/61xS4An9XCy08rwzZcHBuoZuiOn4ErYVBn58xl01+JyDRdw1dnN8C3N7wEMx8KXB59uVS8tShgZvkO/XBxgqg1wuGi1sDP+zuLPGb5ZtYvbZILRtu19Iy88yLYg5SmL+1vgxDQXa4QvaLGJam+f/1TOsc7k5hgw30HZ9QO9yQxMuo815fp/+cfIU/SnJjbRdHyBNQ536aH/q0sI/Th4CbhLdVNOh7TDUo0v6jIKTeZ/sBvtieA2KL05GzyU4jQwran8+tB2G8gyRZ57fl0sUd/PdJbv5tB2G9fWRa12S3iYUPfyWLYWPUjicXDeH8EzPmrsw3I8b040JCg2FBhiaMzQHGQxhqhGqu2kzLs5x08JyxYTFxlCprJ/njC49HPTcuAqf9UETuoRJXttheL0x8o0c2nCMFPrIN5en7TC87CLps6Fz6ckmU5MOm3fAr2XcVEzTMdKbXoYZtxXWdhjc/4AKANIxAgj8wBwgtK0Pa4CAZ4xhFTC0pAtfAQE78h0wtHEfj2EfEGAPfdgJDGo0hJ1AgYUeJvYChzpCu14gwKJ0A4NydaEbKOBB40GDYC6YA8fSh6FGWNMQpuaAlR9CFhvBacO3xblAEXxuBKe5z3yeCxSpCxuOwDGMYYMuoAJ92HIUlmCLbqBKmo7AfjTpAqqn7Si4X9wvoKJR0YARMyNmkJE5TfhRH9bMAImMYVUzuXXhqxkgKd81k/V3P4Z9MwDsbEYaQ9g5E+DJh6O9zWk15OqdAfAM3c1oSRe6ZwJ4cHpwCrKCLMBu+jB0Sl2GMJUFsOhD1eIpSg+rFrMCHIHPpyj1d+lzVoAT6MIGKpRhDBtaAZxcH7ZQZR22tAYogCYqnIqmVgCF0UYVvy+/L0CFpkLDCJMRJiAjc7Qcqg9rTACqNYZV2rxOF74yAWiC77TZ9Xcyhn0mAJrTh53aeNoQ5vkBUjzs7dXONhTqNQGQiG5tuXWh2ySAF4EXgeAX7c/zC34AT+jDUHDrhjD1A8AzLwlth9sLdxZ/AvAin4O1cx19/gnAq3VhQ5hajWGBJwAH6sOWsLWwBTQAi9MUplyaQAFwVNrCuh6uB0BiKk4jMho9ASRmzvn0+rAmA4BCjKrRo+vCVxkAFMh358c7r2PYlwGAwvVh57mlDOHLCwAqM7287D2/f4jSmwGAamk7/Dpd6M4IQEO82AQlbXoBEuvD0PbPhjBVAkASQ2g73IfFkgAklPnzNp9LApBel7AStiASAGZ95JsLt2UyAMwyNrnRNAkAImebW216AWCWse2wxkgAMMvYdlibXgCYjWF9gDa9AKSUse2wNr0AMOvD+gBtegFIawjrA7TpBSClrG2HtekFgMjZdlibXgCY9ZGv7bA2vQAwG8K0gDa9AKSUse2wNr0AMOvCZ4Pa9AKQVh+5PxvUpheA1LK1HdamFwBmGdoOa9MLAL/QatthbXoBYAettB3WphcA9jBGnesDtOkFgAPV1HZYm14AWFgfZa8P0KYXAI5oiLLWB2jTCwAnUkLbYW16AWAlXZy+7bA2vQBQiD5O03ZYm14AKNAQx5kW0KYXAAq3ZNthbXoBoDJdHPbZ4Bjm+QGgWtNWvFex29TA3fzi75w2oAR/cwpgsTDQP1HZf56Pe6cIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKB1/xZgAFkNa7b8L7fBAAAAAElFTkSuQmCC",
    "displayName": "",
    "id": "brand_dummy"
  },
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "help": "This is your unique Offer ID.",
    "displayName": "Offer ID",
    "simpleValueType": true,
    "name": "offerId",
    "type": "TEXT"
  },
  {
    "help": "The unique identifier for individual transaction. Example: Order Number, Booking ID or Lead ID.",
    "displayName": "Unique Reference Number",
    "simpleValueType": true,
    "name": "orderNumber",
    "type": "TEXT"
  },
  {
    "help": "The currency for the transaction amount.",
    "displayName": "Currency Code",
    "simpleValueType": true,
    "name": "currencyCode",
    "type": "TEXT"
  },
  {
    "help": "The transaction amount excluding taxes and shipping fees.",
    "displayName": "Order Value",
    "simpleValueType": true,
    "name": "amount",
    "type": "TEXT"
  },
  {
    "help": "Optional. The customer type. Example: New or Returned.",
    "displayName": "Customer Type",
    "simpleValueType": true,
    "name": "customerType",
    "type": "TEXT",
    "canBeEmptyString": true
  },
  {
    "help": "Optional. The voucher code used by the customer during the checkout process.",
    "displayName": "Voucher Code",
    "simpleValueType": true,
    "name": "voucherCode",
    "type": "TEXT",
    "canBeEmptyString": true
  }
]


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "send_pixel",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://invol.co/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// require relevant API
var sendPixel = require('sendPixel');
var encodeUriComponent = require('encodeUriComponent');

// required form fields
var offerId = encodeUriComponent(data.offerId);
var orderNumber = encodeUriComponent(data.orderNumber);
var currencyCode = encodeUriComponent(data.currencyCode);
var amount = encodeUriComponent(data.amount);

// optional form fields
var customerType = null;
var voucherCode = null;

if ( data.customerType ) {
	var customerType = encodeUriComponent(data.customerType);
}

if ( data.voucherCode ) {
	var voucherCode = encodeUriComponent(data.voucherCode);
}

// use the provided APIs to do things like send pixels
var conversionURL = 'https://invol.co/aff_lg?currency=' + currencyCode + '&amount=' + amount + '&adv_sub=' + orderNumber + '&adv_sub2=' + customerType + '&adv_sub3=' + voucherCode + '&offer_id=' + offerId;

sendPixel(conversionURL, data.gtmOnSuccess, data.gtmOnFailure);


___NOTES___

Created on 20/08/2019, 11:09:04
